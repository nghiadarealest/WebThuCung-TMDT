@{
    ViewData["Title"] = "Thanh toán thành công";
}

<link rel="stylesheet" href="/css/paymentSuccessful.css" />

<div class="success-container">
    <div class="success-check">
        <div class="check-circle animate">
            <div class="check-mark"></div>
        </div>
    </div>
    
    <div class="success-message fade-in">
        <h2>Cảm ơn bạn. Đơn hàng của bạn đã được nhận.</h2>
        <div class="text-center">
            <h1 class="display-4">
                <img src="/images/vnpay-logo.png" alt="Momo Logo" style="height: 40px; margin-right: 10px; vertical-align: middle;">
                Thanh toán VnPay
            </h1>
        </div>

        <div class="table-responsive">
            <form action="/Payment/CreateVNPayPaymentUrl" id="frmCreateOrder" method="POST">
                <div class="form-group">
                    <label for="ordertype">Loại Sản Phẩm </label>
                    <select name="OrderType" id="ordertype" class="form-control">
                <option value="fashion">Thú cưng</option>
                <option value="fashion">Phụ kiện</option>
            </select>
                </div>
                <br/>
                <div class="form-group">
                    <label for="Name">Tên khách hàng</label>
                    <input class="form-control"
                           id="Name"
                           name="Name"
                           type="text"
                           value="Code Mega">
                </div>
                <br/>
                <div class="form-group">
                    <label for="Amount">Số tiền</label>
                    <input class="form-control"
                           id="Amount"
                           name="Amount"
                           type="text"
                           value="20000000">
                </div>
                <br/>
                <div class="form-group">
                    <label for="OrderDescription">Nội dung thanh toán</label>
                    <textarea class="form-control" 
                              cols="20" 
                              id="OrderDescription" 
                              name="OrderDescription" 
                              rows="2">Thanh toán tại ShopPNP</textarea>
                </div>
                <br/>
                <button type="submit" class="btn btn-primary">
                    <img src="/images/vnpay-logo.png" alt="Momo Logo" style="height: 20px; margin-right: 8px;">
                    Thanh toán
                </button>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Lấy các giá trị từ localStorage
        const totalPrice = localStorage.getItem('totalPrice'); // Lấy giá trị của totalPrice
        const username = localStorage.getItem('username'); // Lấy giá trị của username

        // Gán giá trị vào input Tên khách hàng
        const nameInput = document.getElementById('Name');
        if (nameInput && username) {
            nameInput.value = username; // Gán tên người dùng vào input Name
        }

        // Gán giá trị vào input Amount
        const amountInput = document.getElementById('Amount');
        if (amountInput && totalPrice) {
            amountInput.value = totalPrice*1000; // Gán số tiền vào input Amount (giả sử giá trị trong localStorage là tiền tệ đã được quy đổi)
        }

        // Gán giá trị vào textarea OrderDescription nếu cần
        const orderDescriptionTextarea = document.getElementById('OrderDescription');
        if (orderDescriptionTextarea) {
            orderDescriptionTextarea.value = 'Thanh toán tại ShopPNP'; // Gán giá trị mặc định
        }
    });
</script>
